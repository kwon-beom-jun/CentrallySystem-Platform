
server.host=http://localhost
server.port=9899
server.address=0.0.0.0
server.servlet.context-path=/receipt

# Graceful Shutdown 설정 (무중단 배포)
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

kafka.server.ip=localhost:9092

receipt.eureka.server.ip=localhost
eureka.server.ip=http://localhost:8761/eureka/

# 권한 체크 목록
# 현재는 하나라도 존재시 패스
receipt.roles=ROLE_RECEIPT_REGISTRAR,\
			  ROLE_RECEIPT_APPROVER,\
			  ROLE_RECEIPT_INSPECTOR,\
			  ROLE_RECEIPT_FINALIZER,\
			  ROLE_RECEIPT_MANAGER,\
			  ROLE_GATE_SYSTEM

# 권한 검사 제외 URL : {id}는 접속 유저의 id
receipt.role.exclude.url=

# -----------------------------------------------------------------
# 파일 설정
# -----------------------------------------------------------------

# (RECEIPT 서비스 공통) 파일 경로 URL
# 예) http://localhost:9999/hrm/upload
file.upload.url=${server.host}:${server.port}${server.servlet.context-path}/upload
# (RECEIPT 서비스 공통) 파일 업로드 위치
file.upload.path=C:/Users/qjawn/Desktop/censys/upload/img
#file.upload.path=C:/Users/kpcnc/Desktop/censys/upload/img

# 영수증 파일 업로드 경로 (상대 경로)
receipt.file.upload.url=/upload/receipt
# 영수증 파일 업로드 위치
receipt.file.upload.path=${file.upload.path}/receipt

spring.resources.static-locations=classpath:/static/,\
								  classpath:/public/,\
								  classpath:/META-INF/resources/,\
								  file:${user.dir}/src/main/resources/template/file/
								  # file:${file.upload.path}
								  
spring.servlet.multipart.enabled=true
# 단일 파이 최대 크기
spring.servlet.multipart.max-file-size=20MB
# 전체 요청의 최대 크기
spring.servlet.multipart.max-request-size=20MB
# 한번에 파일 업로드 가능 수량
file.upload.total.size=20

# 다운로드 용량 제한 (일일 IP별 제한, 영수증은 작은 파일이므로 낮게 설정)
download.quota.daily.limit.mb=20


# -----------------------------------------------------------------
# Kafka 설정
# -----------------------------------------------------------------

# Kafka 공통 설정
spring.kafka.bootstrap-servers=${kafka.server.ip}

# Producer 전용 설정 (자동 구성에 의해 사용)
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=2
spring.kafka.producer.linger-ms=50

# Consumer 전용 공통 설정 (properties에만 넣어두고, 그룹 아이디 등 확장은 Config에서 처리)
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false


# -----------------------------------------------------------------
# Mail 발송 관련 설정
# -----------------------------------------------------------------

# 메일 전송 OFF
cs.mail.enabled=false

# 구글 SMTP 서버 설정
#################################################
# 	※ 중요 ※ 									#
# 	발송 메일은 보안 설정에 따라서 달라짐					#
# 	설정 > 보안									#
# 		1. 2단계 인증이 사용중인지					#
# 		2. 보안 수준이 낮은 앱의 액세스 : 허용으로 설정	#
#################################################
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=YOUR_APP_PASSWORD_HERE
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
logging.level.org.springframework.boot.autoconfigure.mail=DEBUG


# ========================== DB 설정 ==========================
# PostgreSQL 데이터베이스 설정
spring.datasource.url=jdbc:postgresql://localhost:5432/centrcpt
spring.datasource.username=dummy_db_user
spring.datasource.password=YOUR_DB_PASSWORD_HERE
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA 설정
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# ========================== DB 설정 ==========================


# ========================= Eureka 설정 =========================
# Eureka에 등록되는 어플리케이션 이름과 인스턴스 ID 지정
eureka.instance.appname=centrally-system-receipt
eureka.instance.instanceId=${receipt.eureka.server.ip}:${spring.application.name}:${server.port}
#eureka.instance.metadataMap.contextPath=${server.servlet.context-path}

# Eureka 등록
eureka.client.service-url.defaultZone=${eureka.server.ip}

# Eureka Client 설정 (등록 활성화)
eureka.client.enabled=true

# Eureka에 서버 포트가 올바르게 등록되도록 아래와 같이 명시할 수 있습니다.
eureka.instance.nonSecurePort=${server.port}
# ========================= Eureka 설정 =========================


# ============================== 선택 및 옵션 사항 ===============================
# 기본적으로 Spring Boot 서비스는 eureka.instance.prefer-ip-address=true가 
# 설정되지 않으면 호스트명을 사용하여 등록
# 서비스 등록 시 호스트 이름 대신 IP 주소 사용 금지 (localhost 유지)
#eureka.instance.hostname=localhost
#eureka.instance.prefer-ip-address=false
# ============================== 선택 및 옵션 사항 ===============================


# -----------------------------------------------------------------
# 로그 설정
# -----------------------------------------------------------------
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=INFO

# -----------------------------------------------------------------
# JWT 관련 설정
# -----------------------------------------------------------------
# 실제 운영 시에는 별도 보안 vault나 환경변수로 관리하는 것을 권장
jwt.secret=YOUR_JWT_SECRET_KEY_HERE
# 2시간(밀리초 기준)
jwt.expiration=7200000



