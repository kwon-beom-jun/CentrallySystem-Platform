# HRM 서비스 개요

<br>

## 📋 개요

HRM (Human Resources Management) 서비스는 기업의 인사 관리 전반을 담당하는 마이크로서비스입니다. 사원 정보, 조직 구조, 실적 관리 등 인사 관련 모든 데이터를 중앙에서 관리합니다.

<br>

## 🔧 주요 기능

### 1. 사원 정보 관리

**역할:** 회사 내 모든 사원의 상세 정보를 관리합니다.

- 사원 기본 정보 관리 (이름, 이메일, 생년월일, 연락처 등)
- 프로필 이미지 관리
- 입사일, 퇴사일 관리
- 주소 정보 관리
- 은행 계좌 정보 관리
- 주민등록번호 관리
- 파견지 정보 관리

<br>

### 2. 조직 관리

**역할:** 회사의 조직 구조를 관리합니다.

#### 부서 관리
- 부서 생성, 수정, 삭제
- 부서명 변경
- 부서 비활성화/활성화

#### 팀 관리
- 팀 생성, 수정, 삭제
- 부서별 팀 관리
- 팀명 변경
- 팀 비활성화/활성화

#### 조직 변경 이벤트 발행
- 부서/팀 생성/변경/삭제 시 Kafka 이벤트 발행
- 다른 서비스(Receipt, Info 등)로 조직 변경 사항 전파

<br>

### 3. 직급 및 직책 관리

**역할:** 사원의 직급과 직책 정보를 관리합니다.

- 직급 관리 (사원, 대리, 과장, 차장, 부장 등)
- 직책 관리
- 사원별 직급/직책 할당

<br>

### 4. 고용 형태 관리

**역할:** 사원의 고용 형태를 관리합니다.

- 정규직, 계약직, 파견직, 인턴 등 고용 형태 관리
- 사원별 고용 형태 할당

<br>

### 5. 실적 관리

**역할:** 사원의 업무 실적을 관리합니다.

- 개인별 실적 등록 및 조회
- 실적 기간별 관리 (시작일, 종료일)
- 업무 유형별 실적 분류
- 실적 상태 관리 (진행중, 완료 등)

<br>

### 6. 경력 관리

**역할:** 사원의 이전 경력 정보를 관리합니다.

- 이전 회사 정보 관리
- 이전 직책 정보 관리
- 입사일, 퇴사일 관리

<br>

### 7. 권한 관리 (동기화)

**역할:** Auth 서비스와 권한 정보를 동기화합니다.

- Auth 서비스에서 권한 변경 이벤트 수신
- HRM 서비스 내부 권한 스냅샷 동기화
- 권한 정보 조회 및 관리

**특징:**
- HRM은 권한의 원본이 아닌 읽기 전용 캐시로 유지
- 권한 변경은 Auth 서비스에서만 수행
- Kafka 이벤트를 통해 실시간 동기화

<br>

### 8. UI 스타일 관리

**역할:** 사용자별 UI 스타일 설정을 관리합니다.

- 메인 화면 카드 스타일 설정
- 모바일 화면 스타일 설정
- 사용자별 맞춤 스타일 적용

<br>

### 9. 즐겨찾기 메뉴 관리

**역할:** 사용자별 즐겨찾는 메뉴를 관리합니다.

- 즐겨찾기 메뉴 추가/삭제
- 메뉴 순서 조정
- 카테고리별 메뉴 관리

<br>

### 10. 파견지 관리

**역할:** 사원의 파견 근무지 정보를 관리합니다.

- 파견지 정보 등록
- 사원별 파견지 할당
- 파견지별 실적 관리

<br>

### 11. 메일 발송 서비스

**역할:** 인사 관련 메일 발송 기능을 제공합니다.

- 게시글 알림 메일 발송 (Info 서비스 요청)
- 사원별 메일 발송
- 조직별 메일 발송

<br>

## 🔄 Kafka 이벤트 통신

### 수신 이벤트 (Consumer)

#### Auth 서비스 이벤트
- **사용자 가입 이벤트**: 새 사용자 가입 시 HRM 사용자 생성 (Saga 패턴)
- **권한 변경 이벤트**: 권한 생성/수정/삭제 시 권한 정보 동기화
- **사용자 비활성화 이벤트**: 사용자 삭제/비활성화 시 HRM 사용자도 비활성화

#### Info 서비스 이벤트
- **게시글 메일 발송 요청**: 게시글 작성 시 사원들에게 알림 메일 발송

<br>

### 발행 이벤트 (Producer)

#### 조직 변경 이벤트
- **부서 생성/변경/삭제**: 다른 서비스에 조직 구조 변경 사항 전파
- **팀 생성/변경/삭제**: 팀 구조 변경 사항 전파
- **사용자 조직 변경**: 사원의 부서/팀 변경 시 Receipt, Info 등 관련 서비스에 전파

#### 사용자 Saga 이벤트
- 사용자 가입 처리 결과 전파 (성공/실패)

<br>

## 📌 주요 특징

### 1. 중앙 인사 데이터 관리
- 모든 사원 정보를 한 곳에서 중앙 관리
- 조직 구조 변경 시 관련 서비스에 자동 동기화

### 2. 실시간 동기화
- Auth 서비스와의 권한 정보 실시간 동기화
- 조직 변경 시 즉시 다른 서비스에 이벤트 전파

### 3. 논리 삭제 (Soft Delete)
- 사원 정보 삭제 시 실제 삭제가 아닌 비활성화 처리
- 데이터 복구 가능 및 이력 관리

### 4. Saga 패턴 적용
- 사용자 가입 시 Auth ↔ HRM 간 분산 트랜잭션 처리
- 실패 시 롤백 처리

### 5. 권한 스냅샷 관리
- Auth 서비스의 권한 정보를 읽기 전용으로 캐싱
- 빠른 권한 조회 성능 제공

<br>

## 🔗 관련 서비스와의 연동

### Auth 서비스
- 사용자 가입 시 HRM 사용자 자동 생성
- 권한 정보 실시간 동기화
- 사용자 삭제/비활성화 동기화

### Receipt 서비스
- 조직 구조 변경 시 영수증 승인 라인 자동 반영
- 사원 정보 조회 (이름, 부서, 팀 등)

### Info 서비스
- 조직 구조 변경 시 게시판 가시성 설정 자동 반영
- 사원 정보 조회

<br>

## 💡 활용 사례

- **영수증 서비스**: 사원의 부서/팀 정보를 기반으로 승인 라인 자동 구성
- **정보 관리 서비스**: 부서별 게시판 접근 권한 관리
- **조직도 관리**: 실시간 조직 구조 조회 및 표시
- **인사 현황 대시보드**: 부서별/팀별 사원 현황 파악
- **실적 관리**: 개인별 업무 실적 추적 및 관리

<br>

